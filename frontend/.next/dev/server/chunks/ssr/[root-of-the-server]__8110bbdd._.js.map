{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///D:/tripplan/frontend/components/PlaceAutocomplete.jsx"],"sourcesContent":["import { useEffect, useState, useRef } from 'react'\r\n\r\nexport default function PlaceAutocomplete({ value, onChange, placeholder }) {\r\n  const [input, setInput] = useState(value || '')\r\n  const [predictions, setPredictions] = useState([])\r\n  const timeoutRef = useRef(null)\r\n  const apiUrl = process.env.NEXT_PUBLIC_API_URL || ''\r\n\r\n  useEffect(() => {\r\n    setInput(value || '')\r\n  }, [value])\r\n\r\n  const doSearch = async (q) => {\r\n    if (!apiUrl) {\r\n      setPredictions([])\r\n      return\r\n    }\r\n\r\n    try {\r\n      const r = await fetch(`${apiUrl}/places/search?q=${encodeURIComponent(q)}`, { credentials: 'include' })\r\n      if (r.ok) {\r\n        const data = await r.json()\r\n        // expect { results: [{place_name, lat, lon, display_name, type}, ...] }\r\n        if (data && Array.isArray(data.results)) {\r\n          setPredictions(\r\n            data.results.map(p => ({\r\n              description: p.place_name || p.display_name || 'Unknown',\r\n              place_name: p.place_name || p.display_name,\r\n              lat: p.lat,\r\n              lon: p.lon,\r\n            }))\r\n          )\r\n          return\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn('Backend search failed', e)\r\n    }\r\n    setPredictions([])\r\n  }\r\n\r\n  const onInput = (v) => {\r\n    setInput(v)\r\n    if (timeoutRef.current) clearTimeout(timeoutRef.current)\r\n    timeoutRef.current = setTimeout(() => {\r\n      const q = (v || '').trim()\r\n      // Only query when user typed at least 3 characters to reduce rate\r\n      if (q && q.length >= 3) doSearch(q)\r\n      else setPredictions([])\r\n    }, 250)\r\n  }\r\n\r\n  const pick = (desc, lat, lon) => {\r\n    setInput(desc)\r\n    setPredictions([])\r\n    onChange && onChange(desc, lat, lon)\r\n  }\r\n\r\n  return (\r\n    <div style={{ position: 'relative' }}>\r\n      <input\r\n        value={input}\r\n        placeholder={placeholder || ''}\r\n        onChange={e => onInput(e.target.value)}\r\n        style={{ width: '100%' }}\r\n      />\r\n      {predictions && predictions.length > 0 && (\r\n        <div style={{ position: 'absolute', left: 0, right: 0, background: '#fff', border: '1px solid #ddd', zIndex: 80 }}>\r\n          {predictions.map((p, i) => (\r\n            <div\r\n              key={i}\r\n              style={{ padding: 8, cursor: 'pointer' }}\r\n              onClick={() => pick(p.description, p.lat, p.lon)}\r\n            >\r\n              {p.description}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;;AAEe,SAAS,kBAAkB,EAAE,KAAK,EAAE,QAAQ,EAAE,WAAW,EAAE;IACxE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+GAAQ,EAAC,SAAS;IAC5C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,+GAAQ,EAAC,EAAE;IACjD,MAAM,aAAa,IAAA,6GAAM,EAAC;IAC1B,MAAM,SAAS,6DAAmC;IAElD,IAAA,gHAAS,EAAC;QACR,SAAS,SAAS;IACpB,GAAG;QAAC;KAAM;IAEV,MAAM,WAAW,OAAO;QACtB;;QAKA,IAAI;YACF,MAAM,IAAI,MAAM,MAAM,GAAG,OAAO,iBAAiB,EAAE,mBAAmB,IAAI,EAAE;gBAAE,aAAa;YAAU;YACrG,IAAI,EAAE,EAAE,EAAE;gBACR,MAAM,OAAO,MAAM,EAAE,IAAI;gBACzB,wEAAwE;gBACxE,IAAI,QAAQ,MAAM,OAAO,CAAC,KAAK,OAAO,GAAG;oBACvC,eACE,KAAK,OAAO,CAAC,GAAG,CAAC,CAAA,IAAK,CAAC;4BACrB,aAAa,EAAE,UAAU,IAAI,EAAE,YAAY,IAAI;4BAC/C,YAAY,EAAE,UAAU,IAAI,EAAE,YAAY;4BAC1C,KAAK,EAAE,GAAG;4BACV,KAAK,EAAE,GAAG;wBACZ,CAAC;oBAEH;gBACF;YACF;QACF,EAAE,OAAO,GAAG;YACV,QAAQ,IAAI,CAAC,yBAAyB;QACxC;QACA,eAAe,EAAE;IACnB;IAEA,MAAM,UAAU,CAAC;QACf,SAAS;QACT,IAAI,WAAW,OAAO,EAAE,aAAa,WAAW,OAAO;QACvD,WAAW,OAAO,GAAG,WAAW;YAC9B,MAAM,IAAI,CAAC,KAAK,EAAE,EAAE,IAAI;YACxB,kEAAkE;YAClE,IAAI,KAAK,EAAE,MAAM,IAAI,GAAG,SAAS;iBAC5B,eAAe,EAAE;QACxB,GAAG;IACL;IAEA,MAAM,OAAO,CAAC,MAAM,KAAK;QACvB,SAAS;QACT,eAAe,EAAE;QACjB,YAAY,SAAS,MAAM,KAAK;IAClC;IAEA,qBACE,qKAAC;QAAI,OAAO;YAAE,UAAU;QAAW;;0BACjC,qKAAC;gBACC,OAAO;gBACP,aAAa,eAAe;gBAC5B,UAAU,CAAA,IAAK,QAAQ,EAAE,MAAM,CAAC,KAAK;gBACrC,OAAO;oBAAE,OAAO;gBAAO;;;;;;YAExB,eAAe,YAAY,MAAM,GAAG,mBACnC,qKAAC;gBAAI,OAAO;oBAAE,UAAU;oBAAY,MAAM;oBAAG,OAAO;oBAAG,YAAY;oBAAQ,QAAQ;oBAAkB,QAAQ;gBAAG;0BAC7G,YAAY,GAAG,CAAC,CAAC,GAAG,kBACnB,qKAAC;wBAEC,OAAO;4BAAE,SAAS;4BAAG,QAAQ;wBAAU;wBACvC,SAAS,IAAM,KAAK,EAAE,WAAW,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG;kCAE9C,EAAE,WAAW;uBAJT;;;;;;;;;;;;;;;;AAWnB","debugId":null}},
    {"offset": {"line": 146, "column": 0}, "map": {"version":3,"sources":["file:///D:/tripplan/frontend/components/PlannerForm.jsx"],"sourcesContent":["import { useState } from 'react'\r\nimport { useRouter } from 'next/router'\r\nimport PlaceAutocomplete from './PlaceAutocomplete'\r\n\r\nexport default function PlannerForm({ initial = {}, onComplete }) {\r\n  const router = useRouter()\r\n  const [destination, setDestination] = useState(initial.destination || '')\r\n  const [startDate, setStartDate] = useState(initial.start_date || '')\r\n  const [endDate, setEndDate] = useState(initial.end_date || '')\r\n  const [budget, setBudget] = useState(initial.budget || '')\r\n  const [preferences, setPreferences] = useState((initial.preferences && initial.preferences.join(', ')) || '')\r\n  const [loading, setLoading] = useState(false)\r\n  const [error, setError] = useState(null)\r\n  const apiUrl = process.env.NEXT_PUBLIC_API_URL || ''\r\n\r\n  const handleSubmit = async (e) => {\r\n    e && e.preventDefault()\r\n    setLoading(true)\r\n    const payload = {\r\n      destination,\r\n      start_date: startDate,\r\n      end_date: endDate,\r\n      budget: budget ? Number(budget) : undefined,\r\n      preferences: preferences ? preferences.split(',').map(s => s.trim()) : [],\r\n      travelers: 1,\r\n      travel_style: 'balanced'\r\n    }\r\n\r\n    try {\r\n      setError(null)\r\n      const res = await fetch(`${apiUrl}/generate`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(payload),\r\n        credentials: 'include'\r\n      })\r\n\r\n      if (!res.ok) {\r\n        const text = await res.text()\r\n        setError(`Generation failed: ${res.status} ${text}`)\r\n        setLoading(false)\r\n        return\r\n      }\r\n\r\n      const data = await res.json()\r\n      sessionStorage.setItem('latest_itinerary', JSON.stringify(data))\r\n      if (onComplete) onComplete(data)\r\n      else router.push('/results')\r\n    } catch (err) {\r\n      console.error(err)\r\n      setError('Network error while generating itinerary')\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} style={{maxWidth:720}}>\r\n      <div style={{marginBottom:12}}>\r\n        <label>Destination<br/>\r\n          <PlaceAutocomplete value={destination} onChange={setDestination} placeholder=\"City or place\" />\r\n        </label>\r\n      </div>\r\n\r\n      <div style={{display:'flex', gap:12, marginBottom:12}}>\r\n        <label style={{flex:1}}>Start<br/>\r\n          <input type=\"date\" value={startDate} onChange={e=>setStartDate(e.target.value)} required style={{width:'100%'}} />\r\n        </label>\r\n        <label style={{flex:1}}>End<br/>\r\n          <input type=\"date\" value={endDate} onChange={e=>setEndDate(e.target.value)} required style={{width:'100%'}} />\r\n        </label>\r\n      </div>\r\n\r\n      <div style={{marginBottom:12}}>\r\n        <label>Budget (optional)<br/>\r\n          <input type=\"number\" value={budget} onChange={e=>setBudget(e.target.value)} style={{width:'100%'}} />\r\n        </label>\r\n      </div>\r\n\r\n      <div style={{marginBottom:12}}>\r\n        <label>Preferences (comma separated)<br/>\r\n          <input value={preferences} onChange={e=>setPreferences(e.target.value)} style={{width:'100%'}} placeholder=\"museums, hiking, restaurants\" />\r\n        </label>\r\n      </div>\r\n\r\n      <div>\r\n        <button type=\"submit\" disabled={loading}>{loading ? 'Planningâ€¦' : 'Generate Itinerary'}</button>\r\n      </div>\r\n      {error && <div style={{color:'red', marginTop:12}}>{error}</div>}\r\n    </form>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 425, "column": 0}, "map": {"version":3,"sources":["file:///D:/tripplan/frontend/pages/index.js"],"sourcesContent":["import PlannerForm from '../components/PlannerForm'\r\n\r\nexport default function Home() {\r\n  return (\r\n    <div style={{padding:20, maxWidth:960, margin:'0 auto'}}>\r\n      <h1>Trip Planner</h1>\r\n      <PlannerForm />\r\n      <div style={{marginTop:24}}>\r\n        <a href=\"/saved\">Saved Itineraries</a> | <a href=\"/login\">Login</a>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;;AAEe,SAAS;IACtB,qBACE,qKAAC;QAAI,OAAO;YAAC,SAAQ;YAAI,UAAS;YAAK,QAAO;QAAQ;;0BACpD,qKAAC;0BAAG;;;;;;0BACJ,qKAAC,8HAAW;;;;;0BACZ,qKAAC;gBAAI,OAAO;oBAAC,WAAU;gBAAE;;kCACvB,qKAAC;wBAAE,MAAK;kCAAS;;;;;;oBAAqB;kCAAG,qKAAC;wBAAE,MAAK;kCAAS;;;;;;;;;;;;;;;;;;AAIlE","debugId":null}}]
}