{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///D:/tripplan-curr%20-%20Copy/frontend/components/SiteHeader.jsx"],"sourcesContent":["import { useContext } from 'react'\r\nimport { AuthContext } from '../context/AuthProvider'\r\n\r\nexport default function SiteHeader() {\r\n  const { user, clearToken } = useContext(AuthContext)\r\n\r\n  return (\r\n    <header style={{background: 'rgba(255,255,255,0.9)', borderBottom: '1px solid rgba(15,23,42,0.06)', padding: '1rem 0', position: 'sticky', top: 0, zIndex: 100}}>\r\n      <div style={{maxWidth:1200, margin:'0 auto', padding: '0 1.5rem', display:'flex', justifyContent:'space-between', alignItems:'center'}}>\r\n        <div style={{fontSize:18, fontWeight:800}} className=\"logo\">‚úàÔ∏è Trip Planner</div>\r\n\r\n        <div style={{display:'flex', alignItems:'center', gap:12}}>\r\n          {user ? (\r\n            <>\r\n              <a href=\"/saved\" style={{padding:'0.45rem 0.8rem', background:'var(--surface)', border:'1px solid var(--border)', borderRadius:8, textDecoration:'none'}}>üìã Saved</a>\r\n              {user.role === 'admin' && (\r\n                <a href=\"/admin\" style={{padding:'0.45rem 0.8rem', background:'var(--surface)', border:'1px solid var(--border)', borderRadius:8, textDecoration:'none'}}>üõ†Ô∏è Admin</a>\r\n              )}\r\n              <div style={{display:'flex', flexDirection:'column', alignItems:'flex-end', fontSize:12}}>\r\n                <div style={{color:'var(--text-tertiary)'}}>Welcome</div>\r\n                <div style={{fontWeight:700}}>{user.full_name || user.email}</div>\r\n              </div>\r\n              <button onClick={clearToken} style={{marginLeft:8, padding:'0.45rem 0.8rem', borderRadius:8, border:'1px solid var(--border)'}}>Logout</button>\r\n            </>\r\n          ) : (\r\n            <a href=\"/login\" style={{padding:'0.5rem 0.9rem', background:'var(--primary)', color:'#fff', borderRadius:8, textDecoration:'none'}}>Sign in</a>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </header>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAEe,SAAS;IACtB,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,GAAG,IAAA,iHAAU,EAAC,gIAAW;IAEnD,qBACE,qKAAC;QAAO,OAAO;YAAC,YAAY;YAAyB,cAAc;YAAiC,SAAS;YAAU,UAAU;YAAU,KAAK;YAAG,QAAQ;QAAG;kBAC5J,cAAA,qKAAC;YAAI,OAAO;gBAAC,UAAS;gBAAM,QAAO;gBAAU,SAAS;gBAAY,SAAQ;gBAAQ,gBAAe;gBAAiB,YAAW;YAAQ;;8BACnI,qKAAC;oBAAI,OAAO;wBAAC,UAAS;wBAAI,YAAW;oBAAG;oBAAG,WAAU;8BAAO;;;;;;8BAE5D,qKAAC;oBAAI,OAAO;wBAAC,SAAQ;wBAAQ,YAAW;wBAAU,KAAI;oBAAE;8BACrD,qBACC;;0CACE,qKAAC;gCAAE,MAAK;gCAAS,OAAO;oCAAC,SAAQ;oCAAkB,YAAW;oCAAkB,QAAO;oCAA2B,cAAa;oCAAG,gBAAe;gCAAM;0CAAG;;;;;;4BACzJ,KAAK,IAAI,KAAK,yBACb,qKAAC;gCAAE,MAAK;gCAAS,OAAO;oCAAC,SAAQ;oCAAkB,YAAW;oCAAkB,QAAO;oCAA2B,cAAa;oCAAG,gBAAe;gCAAM;0CAAG;;;;;;0CAE5J,qKAAC;gCAAI,OAAO;oCAAC,SAAQ;oCAAQ,eAAc;oCAAU,YAAW;oCAAY,UAAS;gCAAE;;kDACrF,qKAAC;wCAAI,OAAO;4CAAC,OAAM;wCAAsB;kDAAG;;;;;;kDAC5C,qKAAC;wCAAI,OAAO;4CAAC,YAAW;wCAAG;kDAAI,KAAK,SAAS,IAAI,KAAK,KAAK;;;;;;;;;;;;0CAE7D,qKAAC;gCAAO,SAAS;gCAAY,OAAO;oCAAC,YAAW;oCAAG,SAAQ;oCAAkB,cAAa;oCAAG,QAAO;gCAAyB;0CAAG;;;;;;;qDAGlI,qKAAC;wBAAE,MAAK;wBAAS,OAAO;4BAAC,SAAQ;4BAAiB,YAAW;4BAAkB,OAAM;4BAAQ,cAAa;4BAAG,gBAAe;wBAAM;kCAAG;;;;;;;;;;;;;;;;;;;;;;AAMjJ","debugId":null}},
    {"offset": {"line": 194, "column": 0}, "map": {"version":3,"sources":["file:///D:/tripplan-curr%20-%20Copy/frontend/pages/itinerary/%5Bid%5D/edit.js"],"sourcesContent":["import { useRouter } from 'next/router'\r\nimport { useEffect, useState } from 'react'\r\nimport SiteHeader from '../../../components/SiteHeader'\r\n\r\nconst apiUrl = process.env.NEXT_PUBLIC_API_URL || ''\r\n\r\nexport default function EditItinerary() {\r\n  const router = useRouter()\r\n  const { id } = router.query\r\n  const [itinerary, setItinerary] = useState(null)\r\n  const [loading, setLoading] = useState(true)\r\n  const [saving, setSaving] = useState(false)\r\n\r\n  useEffect(() => {\r\n    if (!id) return\r\n    setLoading(true)\r\n    fetch(`${apiUrl}/itineraries/${id}`, { credentials: 'include' })\r\n      .then(r => {\r\n        if (!r.ok) throw new Error('Failed to fetch')\r\n        return r.json()\r\n      })\r\n      .then(data => setItinerary(data))\r\n      .catch(e => {\r\n        console.error(e)\r\n        setItinerary(null)\r\n      })\r\n      .finally(() => setLoading(false))\r\n  }, [id, apiUrl])\r\n\r\n  const updateTitle = (t) => setItinerary(prev => ({...prev, title: t}))\r\n  const updateDescription = (d) => setItinerary(prev => ({...prev, description: d}))\r\n  const updateDayNote = (index, note) => {\r\n    setItinerary(prev => {\r\n      const copy = {...prev}\r\n      copy.day_plans = Array.isArray(copy.day_plans) ? [...copy.day_plans] : []\r\n      copy.day_plans[index] = {...(copy.day_plans[index]||{}), notes: note}\r\n      return copy\r\n    })\r\n  }\r\n\r\n  const doSave = async () => {\r\n    if (!itinerary) return\r\n    setSaving(true)\r\n    try {\r\n      // prepare minimal payload\r\n      const payload = {\r\n        title: itinerary.title,\r\n        description: itinerary.description,\r\n        day_plans: itinerary.day_plans\r\n      }\r\n      const resp = await fetch(`${apiUrl}/itineraries/${id}`, {\r\n        method: 'PUT',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        credentials: 'include',\r\n        body: JSON.stringify(payload)\r\n      })\r\n      if (!resp.ok) {\r\n        const txt = await resp.text()\r\n        alert('Save failed: ' + resp.status + ' ' + txt)\r\n        return\r\n      }\r\n      const updated = await resp.json()\r\n      setItinerary(updated)\r\n      alert('Saved successfully')\r\n      router.push('/saved')\r\n    } catch (e) {\r\n      console.error(e)\r\n      alert('Network error')\r\n    } finally {\r\n      setSaving(false)\r\n    }\r\n  }\r\n\r\n  if (loading) return <div style={{padding:20}}>Loading‚Ä¶</div>\r\n  if (!itinerary) return <div style={{padding:20}}>Itinerary not found or you are not authorized.</div>\r\n\r\n  return (\r\n    <>\r\n      <SiteHeader />\r\n      <div style={{padding:24, minHeight:'80vh'}}>\r\n        <div style={{maxWidth:900, margin:'0 auto'}}>\r\n        <h1>Edit Itinerary</h1>\r\n        <div style={{background:'#fff', padding:20, borderRadius:12}}>\r\n          <div style={{marginBottom:12}}>\r\n            <label style={{display:'block', fontWeight:700}}>Title</label>\r\n            <input value={itinerary.title||''} onChange={e=>updateTitle(e.target.value)} style={{width:'100%', padding:10, borderRadius:8, border:'1px solid #e6e6e6'}} />\r\n          </div>\r\n          <div style={{marginBottom:12}}>\r\n            <label style={{display:'block', fontWeight:700}}>Description / Notes</label>\r\n            <textarea value={itinerary.description||''} onChange={e=>updateDescription(e.target.value)} style={{width:'100%', padding:10, borderRadius:8, border:'1px solid #e6e6e6'}} rows={4} />\r\n          </div>\r\n\r\n          <div style={{marginTop:16}}>\r\n            <h3>Day notes</h3>\r\n            {Array.isArray(itinerary.day_plans) && itinerary.day_plans.map((d, idx) => (\r\n              <div key={idx} style={{marginBottom:12}}>\r\n                <div style={{fontWeight:700}}>Day {d.day || (idx+1)} {d.title ? '‚Äî ' + d.title : ''}</div>\r\n                <textarea value={d.notes||''} onChange={e=>updateDayNote(idx, e.target.value)} style={{width:'100%', padding:10, borderRadius:8, border:'1px solid #e6e6e6'}} rows={2} />\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          <div style={{marginTop:18, display:'flex', gap:12}}>\r\n            <button onClick={doSave} disabled={saving} style={{padding:'0.75rem 1.25rem', background:'#06b6d4', color:'#fff', border:'none', borderRadius:8}}>{saving ? 'Saving‚Ä¶' : 'Save changes'}</button>\r\n            <button onClick={()=>router.push('/saved')} style={{padding:'0.75rem 1.25rem', borderRadius:8}}>Cancel</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    </>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}