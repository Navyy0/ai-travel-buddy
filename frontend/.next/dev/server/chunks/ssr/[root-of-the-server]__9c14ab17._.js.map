{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///D:/tripplan-curr%20-%20Copy/frontend/context/AuthProvider.jsx"],"sourcesContent":["import { createContext, useState, useEffect } from 'react'\r\n\r\nconst apiUrl = process.env.NEXT_PUBLIC_API_URL || ''\r\n\r\nexport const AuthContext = createContext({ token: null, user: null, setToken: () => {}, clearToken: () => {} })\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [token, setTokenState] = useState(null)\r\n  const [user, setUser] = useState(null)\r\n\r\n  // Fetch user profile using HttpOnly cookie (no Authorization header)\r\n  const fetchUser = async () => {\r\n    try {\r\n      const res = await fetch(`${apiUrl}/auth/me`, {\r\n        credentials: 'include'\r\n      })\r\n      if (!res.ok) {\r\n        setUser(null)\r\n        return\r\n      }\r\n      const data = await res.json()\r\n      setUser(data)\r\n    } catch (e) {\r\n      console.warn('AuthProvider: failed to fetch user', e)\r\n      setUser(null)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    // On mount, try to fetch current user via cookie-based session\r\n    fetchUser()\r\n  }, [])\r\n\r\n  const setToken = (t) => {\r\n    // Token is managed by HttpOnly cookie set by backend. Trigger user refresh.\r\n    setTokenState(t)\r\n    fetchUser()\r\n  }\r\n\r\n  const clearToken = () => {\r\n    // Clear local state; backend cookie invalidation can be added separately\r\n    setTokenState(null)\r\n    setUser(null)\r\n  }\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ token, user, setToken, clearToken }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAAA;;;AAEA,MAAM,SAAS,6DAAmC;AAE3C,MAAM,4BAAc,IAAA,oHAAa,EAAC;IAAE,OAAO;IAAM,MAAM;IAAM,UAAU,KAAO;IAAG,YAAY,KAAO;AAAE;AAEtG,SAAS,aAAa,EAAE,QAAQ,EAAE;IACvC,MAAM,CAAC,OAAO,cAAc,GAAG,IAAA,+GAAQ,EAAC;IACxC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,+GAAQ,EAAC;IAEjC,qEAAqE;IACrE,MAAM,YAAY;QAChB,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,GAAG,OAAO,QAAQ,CAAC,EAAE;gBAC3C,aAAa;YACf;YACA,IAAI,CAAC,IAAI,EAAE,EAAE;gBACX,QAAQ;gBACR;YACF;YACA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,QAAQ;QACV,EAAE,OAAO,GAAG;YACV,QAAQ,IAAI,CAAC,sCAAsC;YACnD,QAAQ;QACV;IACF;IAEA,IAAA,gHAAS,EAAC;QACR,+DAA+D;QAC/D;IACF,GAAG,EAAE;IAEL,MAAM,WAAW,CAAC;QAChB,4EAA4E;QAC5E,cAAc;QACd;IACF;IAEA,MAAM,aAAa;QACjB,yEAAyE;QACzE,cAAc;QACd,QAAQ;IACV;IAEA,qBACE,qKAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAO;YAAM;YAAU;QAAW;kBAC9D;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":["file:///D:/tripplan-curr%20-%20Copy/frontend/pages/_app.js"],"sourcesContent":["import { AuthProvider } from '../context/AuthProvider'\r\nimport '../styles/globals.css'\r\n\r\nexport default function App({ Component, pageProps }) {\r\n  return (\r\n    <AuthProvider>\r\n      <Component {...pageProps} />\r\n    </AuthProvider>\r\n  )\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAAA;;;;AAGe,SAAS,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE;IAClD,qBACE,qKAAC,iIAAY;kBACX,cAAA,qKAAC;YAAW,GAAG,SAAS;;;;;;;;;;;AAG9B","debugId":null}}]
}